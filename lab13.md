# **РОССИЙСКИЙ УНИВЕРСИТЕТ ДРУЖБЫ НАРОДОВ**


### **Факультет физико-математических и естественных наук**
### **Кафедра прикладной информатики и теории вероятностей**

---

## **ОТЧЕТ ПО ЛАБОРАТОРНОЙ РАБОТЕ № 	13**
### дисциплина:	Операционные системы


### Студент: Казакова Виктория Алексеевна 
### Группа: НФИбд-01-20

###  **Москва**
### 2021

---
## **Цель работы:** 
### Изучить основы программирования в оболочке ОС UNIX; научиться писать более сложные командные файлы с использованием логических управляющих конструкций и циклов.

---

## **Ход работы**

---

### **1.**	Написала командный файл, реализующий упрощённый механизм семафоров (предварительно создала его и дала права – рис.1). Командный файл должен в течение некоторого времени t1 дожидаться освобождения ресурса, выдавая об этом сообщение, а дождавшись его освобождения, использовать его в течение некоторого времени t2<>t1, также выдавая информацию о том, что ресурс используется соответствующим командным файлом (процессом) (рис.2). Запустила командный файл в одном виртуальном терминале в фоновом режиме, перенаправив его вывод в другой (> /dev/tty#, где # — номер терминала куда перенаправляется вывод), в котором также запущен этот файл, но не фоновом, а в привилегированном режиме (рис.3). Доработала программу так, чтобы имелась возможность взаимодействия трёх и более процессов (рис.5-6);

![](https://sun9-17.userapi.com/impg/rVfslK6sJ2jO-xw-A3_pNRRJ3Dbvx15a535D4A/uSWjBn8WSGY.jpg?size=454x88&quality=96&sign=6ad05d47ccaa5545ae728faa68cca7ef&type=album)

*(рис.1 создание командного файла)*

![](https://sun9-72.userapi.com/impg/k8aGbX0bo8z6YpYcyVcH89OTqCG2f8Uw4A-NSw/7jbVKiyiAS4.jpg?size=702x436&quality=96&sign=18f2a0c98985d521e9d18f0287160f0f&type=album)

*(рис.2 содержимое командного файла)*

![](https://sun9-71.userapi.com/impg/t8Iw_cJtcrQpon3Vz1XuB4vQw8AFTuX5ewYfhw/n_I9cexS-UI.jpg?size=346x82&quality=96&sign=04fc37f8e855a51044fd3e33139349aa&type=album)

*(рис.3 результат работы файла)*

![](https://sun9-32.userapi.com/impg/kB0NDKME0I6TPIXBcfZhypVz044YzDQvmGL-Eg/cG1G92uW1S0.jpg?size=472x109&quality=96&sign=dca5c791710920a17af750f46d869f89&type=album)

*(рис.4 изменения)*

![](https://sun9-16.userapi.com/impg/3i-ihX8mIyp5LhYmnGR3ov5vopYtJNz3jPEj3A/2W1N3dBGnrU.jpg?size=451x139&quality=96&sign=71ecd1f0b931cb273bb5d56c54f198aa&type=album)

*(рис.5 результат после изменения)*

---

### **2.**	Реализовала команду man с помощью командного файла (рис.6). Изучила содержимое каталога /usr/share/man/man1. В нем находятся архивы текстовых файлов, содержащих справку по большинству установленных в системе программ и команд. Каждый архив можно открыть командой less сразу же просмотрев содержимое справки (рис.7). Командный файл должен получать в виде аргумента командной строки название команды и в виде результата выдавать справку об этой команде или сообщение об отсутствии справки, если соответствующего файла нет в каталоге man1 (рис.8);

![](https://sun9-43.userapi.com/impg/7AVuFP63I6JpUKpR_K4orHfIx9Z3xrZb9SrzYA/lr-zGAibagw.jpg?size=685x142&quality=96&sign=3526983e59ff98c0723cab5eb248a944&type=album)

*(рис.6 командный файл)*

![](https://sun9-57.userapi.com/impg/XMgRg98eJhmvvv_cew5KLNu8xv6cFNtqNO7PiA/DT5GWahxCWg.jpg?size=445x46&quality=96&sign=8f4f138cf0dd1d9704c15814d53f39b8&type=album)

*(рис.7 применение команды)*

![](https://sun9-54.userapi.com/impg/8HLDSOa1n05BoVM44HQNGd9B1g9BKFHupk2o-w/eWUWtfAZ2gg.jpg?size=814x466&quality=96&sign=0e9cd76e00febdeee90405dced4e1b3d&type=album)

*(рис.8 результат работы)*

---

### **3.**	Используя встроенную переменную $RANDOM, написала командный файл (рис.9), генерирующий случайную последовательность букв латинского алфавита (рис.10). Учла, что $RANDOM выдаёт псевдослучайные числа в диапазоне от 0 до 32767 (рис.11);

![](https://sun9-65.userapi.com/impg/djktpeoB6sEwYtNYyK2QXe7bIZaW6syNg_oSBw/im9PpPJnL9k.jpg?size=442x88&quality=96&sign=7bd4fdd1ceedb3337f7a56c77447ef02&type=album)

*(рис.9 создание командного файла)*

![](https://sun9-33.userapi.com/impg/6K5HIcNgFzBzt__b1k98h5nutJOeILnAor6fxg/IwG7NxeHdMk.jpg?size=685x354&quality=96&sign=265abb9a7148894d69fb17dfc77e87ab&type=album)

*(рис.10 содержимое файла)*

![](https://sun9-29.userapi.com/impg/pDMLmNNNBJs1VdV41LXXy9T73rnYofAl5XevAA/9e96RQusLXw.jpg?size=379x463&quality=96&sign=79b77b6ec799812d1c979db636fbd0f5&type=album)

*(рис.11 результат работы)*

---

## **Вывод:**
### Изучила основы программирования в оболочке ОС UNIX, научилась писать более сложные командные файлы с использованием логических управляющих конструкций и циклов.

---

## **Ответы на контрольные вопросы:**

#### **1.** В строке while [$1 != "exit"] квадратные скобки надо заменить на круглые.
#
#### **2.** Есть несколько видов конкатенации строк. Например,
#### VAR1="Hello,"
#### VAR2=" World"
#### VAR3="$VAR1$VAR2"
#### echo "$VAR3"
#
#### **3.** Команда seq выводит последовательность целых или действительных чисел, подходящую для передачи в другие программы. В bash можно использовать seq с циклом for, используя подстановку команд. Например,
#### $ for i in $(seq 1 0.5 4)
#### do
#### echo "The number is $i"
#### done
#### **4.** Результатом вычисления выражения $((10/3)) будет число 3.
#
#### **5.** Список того, что можно получить, используя Z Shell вместо Bash:
#### Встроенная команда zmv поможет массово переименовать файлы/директории, например, чтобы добавить ‘.txt’ к имени каждого файла, запустите zmv –C '(*)(#q.)' '$1.txt'.
#### Утилита zcalc — это замечательный калькулятор командной строки, удобный способ считать быстро, не покидая терминал.
#### Команда zparseopts — это однострочник, который поможет разобрать сложные варианты, которые предоставляются скрипту.
#### Команда autopushd позволяет делать popd после того, как с помощью cd, чтобы вернуться в предыдущую директорию.
#### Поддержка чисел с плавающей точкой (коей Bash не содержит).
#### Поддержка для структур данных «хэш».
#### Есть также ряд особенностей, которые присутствуют только в Bash:
- Опция командной строки –norc, которая позволяет пользователю иметь дело с инициализацией командной строки, не читая файл .bashrc
- Использование опции –rcfile <filename> с bash позволяет исполнять команды из определённого файла.
- Отличные возможности вызова (набор опций для командной строки)
- Может быть вызвана командой sh
- Bash можно запустить в определённом режиме POSIX. Примените set –o posix, чтобы включить режим, или ––posix при запуске.
#### Можно управлять видом командной строки в Bash. Настройка переменной PROMPT_COMMAND с одним или более специальными символами настроит её за вас.
#### Bash также можно включить в режиме ограниченной оболочки (с rbash или --restricted), это означает, что некоторые команды/действия больше не будут доступны:
#### Настройка и удаление значений служебных переменных SHELL, PATH, ENV, BASH_ENV
#### Перенаправление вывода с использованием операторов ‘>’, ‘>|’, ‘<>’, ‘>&’, ‘&>’, ‘>>’
####  Разбор значений SHELLOPTS из окружения оболочки при запуске
####  Использование встроенного оператора exec, чтобы заменить оболочку другой командой
#### **6.** Синтаксис конструкции for ((a=1; a <= LIMIT; a++)) верен.
#### **7.** Язык bash и другие языки программирования:
- Скорость работы программ на ассемблере может быть более 50% медленнее, чем программ на си / си++, скомпилированных с максимальной оптимизацией;
- Скорость работы виртуальной ява-машины с байт-кодом часто превосходит скорость аппаратуры с кодами, получаемыми трансляторами с языков высокого уровня. Ява-машина уступает по скорости только ассемблеру и лучшим оптимизирующим трансляторам;
- Скорость компиляции и исполнения программ на яваскрипт в популярных браузерах лишь в 2-3 раза уступает лучшим трансляторам и превосходит даже некоторые качественные компиляторы, безусловно намного (более чем в 10 раз) обгоняя большинство трансляторов других языков сценариев и подобных им по скорости исполнения программ;
- Скорость кодов, генерируемых компилятором языка си фирмы Intel, оказалась заметно меньшей, чем компилятора GNU и иногда LLVM;
- Скорость ассемблерных кодов x86-64 может меньше, чем аналогичных кодов x86, примерно на 10%;
- Оптимизация кодов лучше работает на процессоре Intel;
- Скорость исполнения на процессоре Intel была почти всегда выше, за исключением языков лисп, эрланг, аук (gawk, mawk) и бэш. Разница в скорости по бэш скорее всего вызвана разными настройками окружения на тестируемых системах, а не собственно транслятором или железом. Преимущество Intel особенно заметно на 32-разрядных кодах;
- Стек большинства тестируемых языков, в частности, ява и яваскрипт, поддерживают только очень ограниченное число рекурсивных вызовов. Некоторые трансляторы (gcc, icc, ...) позволяют увеличить размер стека изменением переменных среды исполнения или параметром;
- В рассматриваемых версиях gawk, php, perl, bash реализован динамический стек, позволяющий использовать всю память компьютера. Но perl и, особенно, bash используют стек настолько экстенсивно, что 8-16 ГБ не хватает для расчета ack(5,2,3)

### ***Библиография:***
- Лабораторная работа 13 https://esystem.rudn.ru/pluginfile.php/1142238/mod_resource/content/2/010-lab_shell_prog_3.pdf